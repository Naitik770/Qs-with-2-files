<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign In</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="form-container">
     
<button id="back" onclick="window.location.href='#'">&#8592; Back</button>

    <h1>Sign in</h1>
    <form id="sign-in-form">
       <input type="text" id="sign-in-name" placeholder="Full Name" required />
       <div class="underline"></div>
       <input type="txt" id="sign-in-username" placeholder="Username" required />
       <div class="underline"></div>
      <input type="email" id="sign-in-email" placeholder="Email" required />
      <div class="underline"></div>
      <input type="password" id="sign-in-password" placeholder="Password" required />
      <div class="underline"></div>
      <p><a href="/forgot-password.html" id="forgot-password">Forgot Password?</a></p>

      <button type="submit" id="submit">Sign Up</button>
    </form>
    <p>Already have an account? <a href="login.html">Login here</a></p>
    <div class="or">or</div>
    <div id="google-signin-button"></div>

<script src="https://accounts.google.com/gsi/client" async defer></script>


  <script type="module">
  // Import Firebase modules
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.9.0/firebase-app.js';
  import { getAuth, createUserWithEmailAndPassword, sendEmailVerification } from 'https://www.gstatic.com/firebasejs/9.9.0/firebase-auth.js';

  // Firebase config
  const firebaseConfig = {
apiKey: "AIzaSyAtAsCAld8L6Gn96mkDYXQZSMqQyf0TYxI",
   authDomain: "simple-login-3f73a.firebaseapp.com",
   projectId: "simple-login-3f73a",
   storageBucket: "simple-login-3f73a.firebasestorage.app",
   messagingSenderId: "622220968094",
   appId: "1:622220968094:web:c219e77b41b4222555fb8f",
   measurementId: "G-5LMTNYDPSB"
};
  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const signInForm = document.getElementById('sign-in-form');
  const emailInput = document.getElementById('sign-in-email');
  const passwordInput = document.getElementById('sign-in-password');

  signInForm.addEventListener('submit', async (e) => {
  e.preventDefault();

  const name = document.getElementById('sign-in-name').value;
  const email = emailInput.value;
  const password = passwordInput.value;

  try {
    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
    await sendEmailVerification(userCredential.user);

    alert('Verification email sent!');
    window.location.href = 'login.html';  // Redirect to login page
  } catch (error) {
    let errorMessage = 'An error occurred. Please try again.';

    // Handle specific error codes
    switch (error.code) {
      case 'auth/email-already-in-use':
        errorMessage = 'The email address is already in use. Please use a different email or log in.';
        break;
      case 'auth/invalid-email':
        errorMessage = 'The email address is not valid. Please enter a valid email address.';
        break;
      case 'auth/weak-password':
        errorMessage = 'The password is too weak. Please enter a stronger password.';
        break;
      default:
        errorMessage = 'Something went wrong. Please try again later.';
    }

    alert(errorMessage);
  }
});
    // Google Sign-In
    function handleCredentialResponse(response) {
  const userObject = jwt_decode(response.credential); // Decode JWT
  localStorage.setItem('user', JSON.stringify(userObject)); // Save user data locally
  alert('Google Sign-In successful!');
  window.location.href = 'Gprofile.html'; // Redirect to profile page
}

// Initialize Google Sign-In
window.onload = function () {
  google.accounts.id.initialize({
    client_id: "390800348887-a3nr0ugpilk4ajouog0iuliqth7b0vj9.apps.googleusercontent.com",
    callback: handleCredentialResponse,
  });
  google.accounts.id.renderButton(
    document.getElementById("google-signin-button"), 
    { theme: "outline", size: "large" }
  );
};

</script>

</body>
</html>
